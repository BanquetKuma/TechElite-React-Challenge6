import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  images: {
    // ========================================
    // 画像フォーマットの優先順位設定
    // ========================================
    // 解説: ブラウザが対応している場合、以下の順で配信される
    // 1. AVIF（最小サイズ、最新ブラウザのみ対応）
    // 2. WebP（小サイズ、現代ブラウザ対応）
    // 3. 元の形式（JPEG/PNG、すべてのブラウザ対応）
    formats: ["image/avif", "image/webp"],

    // ========================================
    // デバイスサイズの定義
    // ========================================
    // 解説: Next.js がこれらのサイズで画像を生成します
    // 例: スマホ画面が 750px → 750px の画像を配信
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],

    // ========================================
    // アイコンや小さい画像のサイズ定義
    // ========================================
    // 解説: サムネイルやアイコン用のサイズ
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],

    // ========================================
    // 外部画像ドメインの許可（セキュリティ対策）
    // ========================================
    // 解説: 外部URLの画像を使用する場合、ドメインを明示的に許可する必要がある
    // 理由: 悪意のあるサイトの画像を勝手に最適化されるのを防ぐ
    remotePatterns: [
      {
        protocol: "https",
        hostname: "picsum.photos",
      },
    ],
  },
};

export default nextConfig;
